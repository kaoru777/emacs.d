  <main role="main">    <h1>Interface RelinkableCallSite</h1>     <dl> <dt>All Known Implementing Classes:</dt> <dd>
<code><a href="support/abstractrelinkablecallsite">AbstractRelinkableCallSite</a></code>, <code><a href="support/chainedcallsite">ChainedCallSite</a></code>, <code><a href="support/simplerelinkablecallsite">SimpleRelinkableCallSite</a></code>
</dd> </dl>  <pre data-language="java">public interface RelinkableCallSite</pre> <p>Interface for call sites managed by a <a href="dynamiclinker"><code>DynamicLinker</code></a>. Users of Dynalink must use subclasses of <a href="../../../java.base/java/lang/invoke/callsite"><code>CallSite</code></a> that also implement this interface as their call site implementations. There is a readily usable <a href="support/simplerelinkablecallsite"><code>SimpleRelinkableCallSite</code></a> subclass that implements monomorphic inline caching strategy as well as <a href="support/chainedcallsite"><code>ChainedCallSite</code></a> that implements a polymorphic inline caching strategy and retains a chain of previously linked method handles. A relinkable call site will be managed by a <a href="dynamiclinker"><code>DynamicLinker</code></a> object after being associated with it using its <a href="dynamiclinker#link(T)"><code>DynamicLinker.link(RelinkableCallSite)</code></a> method.</p>      <section role="region">  <h2 id="method.summary">Methods</h2> <table>  <tr> <th scope="col">Modifier and Type</th> <th scope="col">Method</th> <th scope="col">Description</th> </tr> <tr id="i0"> <td><code><a href="callsitedescriptor">CallSiteDescriptor</a></code></td> <th scope="row"><code><a href="#getDescriptor()">getDescriptor</a>()</code></th> <td> <p>Returns the descriptor for this call site.</p> </td> </tr> <tr id="i1"> <td><code>void</code></td> <th scope="row"><code><a href="#initialize(java.lang.invoke.MethodHandle)">initialize</a>​(<a href="../../../java.base/java/lang/invoke/methodhandle">MethodHandle</a> relinkAndInvoke)</code></th> <td> <p>Invoked by dynamic linker to initialize the relinkable call site by setting a relink-and-invoke method handle.</p> </td> </tr> <tr id="i2"> <td><code>void</code></td> <th scope="row"><code><a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)">relink</a>​(<a href="linker/guardedinvocation">GuardedInvocation</a> guardedInvocation,
      <a href="../../../java.base/java/lang/invoke/methodhandle">MethodHandle</a> relinkAndInvoke)</code></th> <td> <p>This method will be called by the dynamic linker every time the call site is relinked (but see <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a> for an exception).</p> </td> </tr> <tr id="i3"> <td><code>void</code></td> <th scope="row"><code><a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)">resetAndRelink</a>​(<a href="linker/guardedinvocation">GuardedInvocation</a> guardedInvocation,
              <a href="../../../java.base/java/lang/invoke/methodhandle">MethodHandle</a> relinkAndInvoke)</code></th> <td> <p>This method will be called by the dynamic linker every time the call site is relinked <b>and</b> the linker wishes the call site to throw away any prior linkage state (that is how it differs from <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a>).</p> </td> </tr> </table>  </section>   <div>   <section role="region">  <h2 id="method.detail">Methods</h2>   <h3 id="initialize(java.lang.invoke.MethodHandle)">initialize</h3> <pre data-language="java">void initialize(MethodHandle relinkAndInvoke)</pre> <p>Invoked by dynamic linker to initialize the relinkable call site by setting a relink-and-invoke method handle. The call site implementation is supposed to set this method handle as its target using <a href="../../../java.base/java/lang/invoke/callsite#setTarget(java.lang.invoke.MethodHandle)"><code>CallSite.setTarget(MethodHandle)</code></a>. Relink-and-invoke is the initial method handle set by <a href="dynamiclinker#link(T)"><code>DynamicLinker.link(RelinkableCallSite)</code></a> that will cause the call site to be relinked to an appropriate target on its first invocation based on its arguments, and that linked target will then be invoked (hence the name). This linking protocol effectively delays linking until the call site is invoked with actual arguments and thus ensures that linkers can make nuanced linking decisions based on those arguments and not just on the static method type of the call site.</p> <dl> <dt>Parameters:</dt> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle supplied by Dynalink.</dd> </dl>    <h3 id="getDescriptor()">getDescriptor</h3> <pre data-language="java">CallSiteDescriptor getDescriptor()</pre> <p>Returns the descriptor for this call site.</p> <dl> <dt>Returns:</dt> <dd>the descriptor for this call site.</dd> </dl>    <h3 id="relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)">relink</h3> <pre data-language="java">void relink(GuardedInvocation guardedInvocation,
            MethodHandle relinkAndInvoke)</pre> <p>This method will be called by the dynamic linker every time the call site is relinked (but see <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a> for an exception). It will be passed a <code>GuardedInvocation</code> that the call site should incorporate into its target method handle. When this method is called, the call site is allowed to keep other non-invalidated invocations around for implementation of polymorphic inline caches and compose them with this invocation to form its final target.</p> <dl> <dt>Parameters:</dt> <dd>
<code>guardedInvocation</code> - the guarded invocation that the call site should incorporate into its target method handle.</dd> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the <a href="dynamiclinker"><code>DynamicLinker</code></a> as a callback. It should be used by this call site as the ultimate fallback when it can't invoke its target with the passed arguments. The fallback method is such that when it's invoked, it'll try to obtain an adequate target <a href="linker/guardedinvocation"><code>GuardedInvocation</code></a> for the invocation, and subsequently invoke <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a> or <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a>, and finally invoke the target.</dd> </dl>    <h3 id="resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)">resetAndRelink</h3> <pre data-language="java">void resetAndRelink(GuardedInvocation guardedInvocation,
                    MethodHandle relinkAndInvoke)</pre> <p>This method will be called by the dynamic linker every time the call site is relinked <b>and</b> the linker wishes the call site to throw away any prior linkage state (that is how it differs from <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a>). It will be passed a <code>GuardedInvocation</code> that the call site should use to build its new target method handle. When this method is called, the call site is discouraged from keeping any previous state, and is supposed to only link the current invocation.</p> <dl> <dt>Parameters:</dt> <dd>
<code>guardedInvocation</code> - the guarded invocation that the call site should use to build its target method handle.</dd> <dd>
<code>relinkAndInvoke</code> - a relink-and-invoke method handle. This is a method handle matching the method type of the call site that is supplied by the <a href="dynamiclinker"><code>DynamicLinker</code></a> as a callback. It should be used by this call site as the ultimate fallback when it can't invoke its target with the passed arguments. The fallback method is such that when it's invoked, it'll try to obtain an adequate target <a href="linker/guardedinvocation"><code>GuardedInvocation</code></a> for the invocation, and subsequently invoke <a href="#relink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>relink(GuardedInvocation, MethodHandle)</code></a> or <a href="#resetAndRelink(jdk.dynalink.linker.GuardedInvocation,java.lang.invoke.MethodHandle)"><code>resetAndRelink(GuardedInvocation, MethodHandle)</code></a>, and finally invoke the target.</dd> </dl>   </section>  </div>  </main>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2020, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/11/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/11/docs/api/jdk.dynalink/jdk/dynalink/RelinkableCallSite.html</a>
  </p>
</div>
