  <main role="main">    <h1>Class JShell</h1>   <ul class="inheritance"> <li><a href="../../../java.base/java/lang/object">java.lang.Object</a></li> <li> <ul class="inheritance"> <li>jdk.jshell.JShell</li> </ul> </li> </ul>   <dl> <dt>All Implemented Interfaces:</dt> <dd><code><a href="../../../java.base/java/lang/autocloseable">AutoCloseable</a></code></dd> </dl>  <pre data-language="java">public class JShell
extends Object
implements AutoCloseable</pre> <div>
<p>The JShell evaluation state engine. This is the central class in the JShell API. A <code>JShell</code> instance holds the evolving compilation and execution state. The state is changed with the instance methods <a href="#eval(java.lang.String)"><code>eval(String)</code></a>, <a href="#drop(jdk.jshell.Snippet)"><code>drop(Snippet)</code></a> and <a href="#addToClasspath(java.lang.String)"><code>addToClasspath(String)</code></a>. The majority of methods query the state. A <code>JShell</code> instance also allows registering for events with <a href="#onSnippetEvent(java.util.function.Consumer)"><code>onSnippetEvent(Consumer)</code></a> and <a href="#onShutdown(java.util.function.Consumer)"><code>onShutdown(Consumer)</code></a>, which are unregistered with <a href="#unsubscribe(jdk.jshell.JShell.Subscription)"><code>unsubscribe(Subscription)</code></a>. Access to the source analysis utilities is via <a href="#sourceCodeAnalysis()"><code>sourceCodeAnalysis()</code></a>. When complete the instance should be closed to free resources -- <a href="#close()"><code>close()</code></a>. </p>
<p> An instance of <code>JShell</code> is created with <code>JShell.create()</code>. </p>
<p> This class is not thread safe, except as noted, all access should be through a single thread.</p>
</div> <dl> <dt>Since:</dt> <dd>9</dd> </dl>      <section role="region">  <h2 id="nested.class.summary">Nested Classes</h2> <table>  <tr> <th scope="col">Modifier and Type</th> <th scope="col">Class</th> <th scope="col">Description</th> </tr> <tr> <td><code>static class </code></td> <th scope="row"><code><a href="jshell.builder">JShell.Builder</a></code></th> <td> <p>Builder for <code>JShell</code> instances.</p> </td> </tr> <tr> <td><code>class </code></td> <th scope="row"><code><a href="jshell.subscription">JShell.Subscription</a></code></th> <td> <p>Subscription is a token for referring to subscriptions so they can be <a href="#unsubscribe(jdk.jshell.JShell.Subscription)">unsubscribed</a>.</p> </td> </tr> </table>  </section>  <section role="region">  <h2 id="method.summary">Methods</h2> <table>  <tr> <th scope="col">Modifier and Type</th> <th scope="col">Method</th> <th scope="col">Description</th> </tr> <tr id="i0"> <td><code>void</code></td> <th scope="row"><code><a href="#addToClasspath(java.lang.String)">addToClasspath</a>​(<a href="../../../java.base/java/lang/string">String</a> path)</code></th> <td> <p>The specified path is added to the end of the classpath used in eval().</p> </td> </tr> <tr id="i1"> <td><code>static <a href="jshell.builder">JShell.Builder</a></code></td> <th scope="row"><code><a href="#builder()">builder</a>()</code></th> <td> <p>Factory method for <code>JShell.Builder</code> which, in-turn, is used for creating instances of <code>JShell</code>.</p> </td> </tr> <tr id="i2"> <td><code>void</code></td> <th scope="row"><code><a href="#close()">close</a>()</code></th> <td> <p>Close this state engine.</p> </td> </tr> <tr id="i3"> <td><code>static <a href="jshell">JShell</a></code></td> <th scope="row"><code><a href="#create()">create</a>()</code></th> <td> <p>Create a new JShell state engine.</p> </td> </tr> <tr id="i4"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="diag">Diag</a>&gt;</code></td> <th scope="row"><code><a href="#diagnostics(jdk.jshell.Snippet)">diagnostics</a>​(<a href="snippet">Snippet</a> snippet)</code></th> <td> <p>Return the diagnostics of the most recent evaluation of the snippet.</p> </td> </tr> <tr id="i5"> <td><code><a href="../../../java.base/java/util/list">List</a>&lt;<a href="snippetevent">SnippetEvent</a>&gt;</code></td> <th scope="row"><code><a href="#drop(jdk.jshell.Snippet)">drop</a>​(<a href="snippet">Snippet</a> snippet)</code></th> <td> <p>Remove a declaration from the state.</p> </td> </tr> <tr id="i6"> <td><code><a href="../../../java.base/java/util/list">List</a>&lt;<a href="snippetevent">SnippetEvent</a>&gt;</code></td> <th scope="row"><code><a href="#eval(java.lang.String)">eval</a>​(<a href="../../../java.base/java/lang/string">String</a> input)</code></th> <td> <p>Evaluate the input String, including definition and/or execution, if applicable.</p> </td> </tr> <tr id="i7"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="importsnippet">ImportSnippet</a>&gt;</code></td> <th scope="row"><code><a href="#imports()">imports</a>()</code></th> <td> <p>Returns the active import snippets.</p> </td> </tr> <tr id="i8"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="methodsnippet">MethodSnippet</a>&gt;</code></td> <th scope="row"><code><a href="#methods()">methods</a>()</code></th> <td> <p>Returns the active method snippets.</p> </td> </tr> <tr id="i9"> <td><code><a href="jshell.subscription">JShell.Subscription</a></code></td> <th scope="row"><code><a href="#onShutdown(java.util.function.Consumer)">onShutdown</a>​(<a href="../../../java.base/java/util/function/consumer">Consumer</a>&lt;<a href="jshell">JShell</a>&gt; listener)</code></th> <td> <p>Register a callback to be called when this JShell instance terminates.</p> </td> </tr> <tr id="i10"> <td><code><a href="jshell.subscription">JShell.Subscription</a></code></td> <th scope="row"><code><a href="#onSnippetEvent(java.util.function.Consumer)">onSnippetEvent</a>​(<a href="../../../java.base/java/util/function/consumer">Consumer</a>&lt;<a href="snippetevent">SnippetEvent</a>&gt; listener)</code></th> <td> <p>Register a callback to be called when the Status of a snippet changes.</p> </td> </tr> <tr id="i11"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="snippet">Snippet</a>&gt;</code></td> <th scope="row"><code><a href="#snippets()">snippets</a>()</code></th> <td> <p>Return all snippets.</p> </td> </tr> <tr id="i12"> <td><code><a href="sourcecodeanalysis">SourceCodeAnalysis</a></code></td> <th scope="row"><code><a href="#sourceCodeAnalysis()">sourceCodeAnalysis</a>()</code></th> <td> <p>Access to source code analysis functionality.</p> </td> </tr> <tr id="i13"> <td><code><a href="snippet.status">Snippet.Status</a></code></td> <th scope="row"><code><a href="#status(jdk.jshell.Snippet)">status</a>​(<a href="snippet">Snippet</a> snippet)</code></th> <td> <p>Return the status of the snippet.</p> </td> </tr> <tr id="i14"> <td><code>void</code></td> <th scope="row"><code><a href="#stop()">stop</a>()</code></th> <td> <p>Attempt to stop currently running evaluation.</p> </td> </tr> <tr id="i15"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="typedeclsnippet">TypeDeclSnippet</a>&gt;</code></td> <th scope="row"><code><a href="#types()">types</a>()</code></th> <td> <p>Returns the active type declaration (class, interface, annotation type, and enum) snippets.</p> </td> </tr> <tr id="i16"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="../../../java.base/java/lang/string">String</a>&gt;</code></td> <th scope="row"><code><a href="#unresolvedDependencies(jdk.jshell.DeclarationSnippet)">unresolvedDependencies</a>​(<a href="declarationsnippet">DeclarationSnippet</a> snippet)</code></th> <td> <p>For <a href="snippet.status#RECOVERABLE_DEFINED"><code>RECOVERABLE_DEFINED</code></a> or <a href="snippet.status#RECOVERABLE_NOT_DEFINED"><code>RECOVERABLE_NOT_DEFINED</code></a> declarations, the names of current unresolved dependencies for the snippet.</p> </td> </tr> <tr id="i17"> <td><code>void</code></td> <th scope="row"><code><a href="#unsubscribe(jdk.jshell.JShell.Subscription)">unsubscribe</a>​(<a href="jshell.subscription">JShell.Subscription</a> token)</code></th> <td> <p>Cancel a callback subscription.</p> </td> </tr> <tr id="i18"> <td><code><a href="../../../java.base/java/util/stream/stream">Stream</a>&lt;<a href="varsnippet">VarSnippet</a>&gt;</code></td> <th scope="row"><code><a href="#variables()">variables</a>()</code></th> <td> <p>Returns the active variable snippets.</p> </td> </tr> <tr id="i19"> <td><code><a href="../../../java.base/java/lang/string">String</a></code></td> <th scope="row"><code><a href="#varValue(jdk.jshell.VarSnippet)">varValue</a>​(<a href="varsnippet">VarSnippet</a> snippet)</code></th> <td> <p>Get the current value of a variable.</p> </td> </tr> </table>  <h2 id="methods.inherited.from.class.java.lang.Object">Methods declared in class java.lang.<a href="../../../java.base/java/lang/object">Object</a>
</h2> <code><a href="../../../java.base/java/lang/object#clone()">clone</a>, <a href="../../../java.base/java/lang/object#equals(java.lang.Object)">equals</a>, <a href="../../../java.base/java/lang/object#finalize()">finalize</a>, <a href="../../../java.base/java/lang/object#getClass()">getClass</a>, <a href="../../../java.base/java/lang/object#hashCode()">hashCode</a>, <a href="../../../java.base/java/lang/object#notify()">notify</a>, <a href="../../../java.base/java/lang/object#notifyAll()">notifyAll</a>, <a href="../../../java.base/java/lang/object#toString()">toString</a>, <a href="../../../java.base/java/lang/object#wait()">wait</a>, <a href="../../../java.base/java/lang/object#wait(long)">wait</a>, <a href="../../../java.base/java/lang/object#wait(long,int)">wait</a></code>  </section>   <div>   <section role="region">  <h2 id="method.detail">Methods</h2>   <h3 id="create()">create</h3> <pre data-language="java">public static JShell create()
                     throws IllegalStateException</pre> <div>
<p>Create a new JShell state engine. That is, create an instance of <code>JShell</code>. </p>
<p> Equivalent to <a href="#builder()"><code>JShell.builder()</code></a><a href="jshell.builder#build()"><code>.build()</code></a>.</p>
</div> <dl> <dt>Returns:</dt> <dd>an instance of <code>JShell</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if the <code>JShell</code> instance could not be created.</dd> </dl>    <h3 id="builder()">builder</h3> <pre data-language="java">public static JShell.Builder builder()</pre> <p>Factory method for <code>JShell.Builder</code> which, in-turn, is used for creating instances of <code>JShell</code>. Create a default instance of <code>JShell</code> with <code>JShell.builder().build()</code>. For more construction options see <a href="jshell.builder"><code>JShell.Builder</code></a>.</p> <dl> <dt>Returns:</dt> <dd>an instance of <code>Builder</code>.</dd> <dt>See Also:</dt> <dd><a href="jshell.builder"><code>JShell.Builder</code></a></dd> </dl>    <h3 id="sourceCodeAnalysis()">sourceCodeAnalysis</h3> <pre data-language="java">public SourceCodeAnalysis sourceCodeAnalysis()</pre> <p>Access to source code analysis functionality. An instance of <code>JShell</code> will always return the same <code>SourceCodeAnalysis</code> instance from <code>sourceCodeAnalysis()</code>.</p> <dl> <dt>Returns:</dt> <dd>an instance of <a href="sourcecodeanalysis"><code>SourceCodeAnalysis</code></a> which can be used for source analysis such as completion detection and completion suggestions.</dd> </dl>    <h3 id="eval(java.lang.String)">eval</h3> <pre data-language="java">public List&lt;SnippetEvent&gt; eval(String input)
                        throws IllegalStateException</pre> <div>
<p>Evaluate the input String, including definition and/or execution, if applicable. The input is checked for errors, unless the errors can be deferred (as is the case with some unresolvedDependencies references), errors will abort evaluation. </p>
<p> The input should be exactly one complete snippet of source code, that is, one expression, statement, variable declaration, method declaration, class declaration, or import. To break arbitrary input into individual complete snippets, use <a href="sourcecodeanalysis#analyzeCompletion(java.lang.String)"><code>SourceCodeAnalysis.analyzeCompletion(String)</code></a>. </p>
<p> For imports, the import is added. Classes, interfaces. methods, and variables are defined. The initializer of variables, statements, and expressions are executed. The modifiers public, protected, private, static, and final are not allowed on op-level declarations and are ignored with a warning. Synchronized, native, abstract, and default top-level methods are not allowed and are errors. If a previous definition of a declaration is overwritten then there will be an event showing its status changed to OVERWRITTEN, this will not occur for dropped, rejected, or already overwritten declarations. </p>
<p> If execution environment is out of process, as is the default case, then if the evaluated code causes the execution environment to terminate, this <code>JShell</code> instance will be closed but the calling process and VM remain valid.</p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>input</code> - The input String to evaluate</dd> <dt>Returns:</dt> <dd>the list of events directly or indirectly caused by this evaluation.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dt>See Also:</dt> <dd>
<a href="sourcecodeanalysis#analyzeCompletion(java.lang.String)"><code>SourceCodeAnalysis.analyzeCompletion(String)</code></a>, <a href="#onShutdown(java.util.function.Consumer)"><code>onShutdown(java.util.function.Consumer)</code></a>
</dd> </dl>    <h3 id="drop(jdk.jshell.Snippet)">drop</h3> <pre data-language="java">public List&lt;SnippetEvent&gt; drop(Snippet snippet)
                        throws IllegalStateException</pre> <p>Remove a declaration from the state. That is, if the snippet is an <a href="snippet.status#isActive()">active</a> <a href="persistentsnippet">persistent</a> snippet, remove the snippet and update the JShell evaluation state accordingly. For all active snippets, change the <a href="#status(jdk.jshell.Snippet)">status</a> to <a href="snippet.status#DROPPED"><code>DROPPED</code></a>.</p> <dl> <dt>Parameters:</dt> <dd>
<code>snippet</code> - The snippet to remove</dd> <dt>Returns:</dt> <dd>The list of events from updating declarations dependent on the dropped snippet.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the snippet is not associated with this <code>JShell</code> instance.</dd> </dl>    <h3 id="addToClasspath(java.lang.String)">addToClasspath</h3> <pre data-language="java">public void addToClasspath(String path)</pre> <p>The specified path is added to the end of the classpath used in eval(). Note that the unnamed package is not accessible from the package in which <a href="#eval(java.lang.String)"><code>eval(String)</code></a> code is placed.</p> <dl> <dt>Parameters:</dt> <dd>
<code>path</code> - the path to add to the classpath.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> </dl>    <h3 id="stop()">stop</h3> <pre data-language="java">public void stop()</pre> <div>
<p>Attempt to stop currently running evaluation. When called while the <a href="#eval(java.lang.String)"><code>eval(java.lang.String)</code></a> method is running and the user's code being executed, an attempt will be made to stop user's code. Note that typically this method needs to be called from a different thread than the one running the <code>eval</code> method. </p>
<p> If the <a href="#eval(java.lang.String)"><code>eval(java.lang.String)</code></a> method is not running, does nothing. </p>
<p> The attempt to stop the user's code may fail in some case, which may include when the execution is blocked on an I/O operation, or when the user's code is catching the <a href="../../../java.base/java/lang/threaddeath"><code>ThreadDeath</code></a> exception.</p>
</div>    <h3 id="close()">close</h3> <pre data-language="java">public void close()</pre> <p>Close this state engine. Frees resources. Should be called when this state engine is no longer needed.</p> <dl> <dt>Specified by:</dt> <dd>
<code><a href="../../../java.base/java/lang/autocloseable#close()">close</a></code> in interface <code><a href="../../../java.base/java/lang/autocloseable">AutoCloseable</a></code>
</dd> </dl>    <h3 id="snippets()">snippets</h3> <pre data-language="java">public Stream&lt;Snippet&gt; snippets()</pre> <p>Return all snippets.</p> <dl> <dt>Returns:</dt> <dd>the snippets for all current snippets in id order.</dd> </dl>    <h3 id="variables()">variables</h3> <pre data-language="java">public Stream&lt;VarSnippet&gt; variables()</pre> <p>Returns the active variable snippets. This convenience method is equivalent to <code>snippets()</code> filtered for <a href="snippet.status#isActive()"><code>status(snippet).isActive()</code></a> <code>&amp;&amp; snippet.kind() == Kind.VARIABLE</code> and cast to <code>VarSnippet</code>.</p> <dl> <dt>Returns:</dt> <dd>the active declared variables.</dd> </dl>    <h3 id="methods()">methods</h3> <pre data-language="java">public Stream&lt;MethodSnippet&gt; methods()</pre> <p>Returns the active method snippets. This convenience method is equivalent to <code>snippets()</code> filtered for <a href="snippet.status#isActive()"><code>status(snippet).isActive()</code></a> <code>&amp;&amp; snippet.kind() == Kind.METHOD</code> and cast to MethodSnippet.</p> <dl> <dt>Returns:</dt> <dd>the active declared methods.</dd> </dl>    <h3 id="types()">types</h3> <pre data-language="java">public Stream&lt;TypeDeclSnippet&gt; types()</pre> <p>Returns the active type declaration (class, interface, annotation type, and enum) snippets. This convenience method is equivalent to <code>snippets()</code> filtered for <a href="snippet.status#isActive()"><code>status(snippet).isActive()</code></a> <code>&amp;&amp; snippet.kind() == Kind.TYPE_DECL</code> and cast to TypeDeclSnippet.</p> <dl> <dt>Returns:</dt> <dd>the active declared type declarations.</dd> </dl>    <h3 id="imports()">imports</h3> <pre data-language="java">public Stream&lt;ImportSnippet&gt; imports()</pre> <p>Returns the active import snippets. This convenience method is equivalent to <code>snippets()</code> filtered for <a href="snippet.status#isActive()"><code>status(snippet).isActive()</code></a> <code>&amp;&amp; snippet.kind() == Kind.IMPORT</code> and cast to ImportSnippet.</p> <dl> <dt>Returns:</dt> <dd>the active declared import declarations.</dd> </dl>    <h3 id="status(jdk.jshell.Snippet)">status</h3> <pre data-language="java">public Snippet.Status status(Snippet snippet)</pre> <p>Return the status of the snippet. This is updated either because of an explicit <code>eval()</code> call or an automatic update triggered by a dependency.</p> <dl> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the <code>Snippet</code> to look up</dd> <dt>Returns:</dt> <dd>the status corresponding to this snippet</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the snippet is not associated with this <code>JShell</code> instance.</dd> </dl>    <h3 id="diagnostics(jdk.jshell.Snippet)">diagnostics</h3> <pre data-language="java">public Stream&lt;Diag&gt; diagnostics(Snippet snippet)</pre> <p>Return the diagnostics of the most recent evaluation of the snippet. The evaluation can either because of an explicit <code>eval()</code> call or an automatic update triggered by a dependency.</p> <dl> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the <code>Snippet</code> to look up</dd> <dt>Returns:</dt> <dd>the diagnostics corresponding to this snippet. This does not include unresolvedDependencies references reported in <code>unresolvedDependencies()</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the snippet is not associated with this <code>JShell</code> instance.</dd> </dl>    <h3 id="unresolvedDependencies(jdk.jshell.DeclarationSnippet)">unresolvedDependencies</h3> <pre data-language="java">public Stream&lt;String&gt; unresolvedDependencies(DeclarationSnippet snippet)</pre> <p>For <a href="snippet.status#RECOVERABLE_DEFINED"><code>RECOVERABLE_DEFINED</code></a> or <a href="snippet.status#RECOVERABLE_NOT_DEFINED"><code>RECOVERABLE_NOT_DEFINED</code></a> declarations, the names of current unresolved dependencies for the snippet. The returned value of this method, for a given method may change when an <code>eval()</code> or <code>drop()</code> of another snippet causes an update of a dependency.</p> <dl> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the declaration <code>Snippet</code> to look up</dd> <dt>Returns:</dt> <dd>a stream of symbol names that are currently unresolvedDependencies.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the snippet is not associated with this <code>JShell</code> instance.</dd> </dl>    <h3 id="varValue(jdk.jshell.VarSnippet)">varValue</h3> <pre data-language="java">public String varValue(VarSnippet snippet)
                throws IllegalStateException</pre> <p>Get the current value of a variable.</p> <dl> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the variable Snippet whose value is queried.</dd> <dt>Returns:</dt> <dd>the current value of the variable referenced by snippet.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the snippet is not associated with this <code>JShell</code> instance.</dd> <dd>
<code><a href="../../../java.base/java/lang/illegalargumentexception">IllegalArgumentException</a></code> - if the variable's status is anything but <a href="snippet.status#VALID"><code>Snippet.Status.VALID</code></a>.</dd> </dl>    <h3 id="onSnippetEvent(java.util.function.Consumer)">onSnippetEvent</h3> <pre data-language="java">public JShell.Subscription onSnippetEvent(Consumer&lt;SnippetEvent&gt; listener)
                                   throws IllegalStateException</pre> <p>Register a callback to be called when the Status of a snippet changes. Each call adds a new subscription.</p> <dl> <dt>Parameters:</dt> <dd>
<code>listener</code> - Action to perform when the Status changes.</dd> <dt>Returns:</dt> <dd>A token which can be used to <a href="#unsubscribe(jdk.jshell.JShell.Subscription)">unsubscribe</a> this subscription.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this <code>JShell</code> instance is closed.</dd> </dl>    <h3 id="onShutdown(java.util.function.Consumer)">onShutdown</h3> <pre data-language="java">public JShell.Subscription onShutdown(Consumer&lt;JShell&gt; listener)
                               throws IllegalStateException</pre> <p>Register a callback to be called when this JShell instance terminates. This occurs either because the client process has ended (e.g. called System.exit(0)) or the connection has been shutdown, as by close(). Each call adds a new subscription.</p> <dl> <dt>Parameters:</dt> <dd>
<code>listener</code> - Action to perform when the state terminates.</dd> <dt>Returns:</dt> <dd>A token which can be used to <a href="#unsubscribe(jdk.jshell.JShell.Subscription)">unsubscribe</a> this subscription.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception">IllegalStateException</a></code> - if this JShell instance is closed</dd> </dl>    <h3 id="unsubscribe(jdk.jshell.JShell.Subscription)">unsubscribe</h3> <pre data-language="java">public void unsubscribe(JShell.Subscription token)</pre> <p>Cancel a callback subscription.</p> <dl> <dt>Parameters:</dt> <dd>
<code>token</code> - The token corresponding to the subscription to be unsubscribed.</dd> </dl>   </section>  </div>  </main>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2020, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/11/docs/api/jdk.jshell/jdk/jshell/JShell.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/11/docs/api/jdk.jshell/jdk/jshell/JShell.html</a>
  </p>
</div>
