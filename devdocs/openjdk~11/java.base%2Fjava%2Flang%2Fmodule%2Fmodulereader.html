  <main role="main">    <h1>Interface ModuleReader</h1>     <dl> <dt>All Superinterfaces:</dt> <dd>
<code><a href="../autocloseable">AutoCloseable</a></code>, <code><a href="../../io/closeable">Closeable</a></code>
</dd> </dl>  <pre data-language="java">public interface ModuleReader
extends Closeable</pre> <div>
<p>Provides access to the content of a module. </p>
<p> A module reader is intended for cases where access to the resources in a module is required, regardless of whether the module has been loaded. A framework that scans a collection of packaged modules on the file system, for example, may use a module reader to access a specific resource in each module. A module reader is also intended to be used by <code>ClassLoader</code> implementations that load classes and resources from modules. </p> <p> A resource in a module is identified by an abstract name that is a '<code>/</code>'-separated path string. For example, module <code>java.base</code> may have a resource "<code>java/lang/Object.class</code>" that, by convention, is the class file for <code>java.lang.Object</code>. A module reader may treat directories in the module content as resources (whether it does or not is module reader specific). Where the module content contains a directory that can be located as a resource then its name ends with a slash ('/'). The directory can also be located with a name that drops the trailing slash. </p> <p> A <code>ModuleReader</code> is <a href="modulereference#open()">open</a> upon creation and is closed by invoking the <a href="#close()"><code>close</code></a> method. Failure to close a module reader may result in a resource leak. The <code>
 try-with-resources</code> statement provides a useful construct to ensure that module readers are closed. </p> <p> A <code>ModuleReader</code> implementation may require permissions to access resources in the module. Consequently the <a href="#find(java.lang.String)"><code>find</code></a>, <a href="#open(java.lang.String)"><code>open</code></a>, <a href="#read(java.lang.String)"><code>read</code></a>, and <a href="#list()"><code>list</code></a> methods may throw <code>
 SecurityException</code> if access is denied by the security manager. </p>
</div> <dl> <dt>Implementation Requirements:</dt> <dd>Implementations of <code>ModuleReader</code> should take great care when translating an abstract resource name to the location of a resource in a packaged module or on the file system. Implementations are advised to treat resource names with elements such as '<code>.</code>, '<code>..</code>', elements containing file separators, or empty elements as "not found". More generally, if the resource name is not in the stream of elements that the <code>list</code> method returns then the resource should be treated as "not found" to avoid inconsistencies.</dd> <dt>Since:</dt> <dd>9</dd> <dt>See Also:</dt> <dd><a href="modulereference"><code>ModuleReference</code></a></dd> </dl>      <section role="region">  <h2 id="method.summary">Methods</h2> <table>  <tr> <th scope="col">Modifier and Type</th> <th scope="col">Method</th> <th scope="col">Description</th> </tr> <tr id="i0"> <td><code>void</code></td> <th scope="row"><code><a href="#close()">close</a>()</code></th> <td> <p>Closes the module reader.</p> </td> </tr> <tr id="i1"> <td><code><a href="../../util/optional">Optional</a>&lt;<a href="../../net/uri">URI</a>&gt;</code></td> <th scope="row"><code><a href="#find(java.lang.String)">find</a>​(<a href="../string">String</a> name)</code></th> <td> <p>Finds a resource, returning a URI to the resource in the module.</p> </td> </tr> <tr id="i2"> <td><code><a href="../../util/stream/stream">Stream</a>&lt;<a href="../string">String</a>&gt;</code></td> <th scope="row"><code><a href="#list()">list</a>()</code></th> <td> <p>Lists the contents of the module, returning a stream of elements that are the names of all resources in the module.</p> </td> </tr> <tr id="i3"> <td><code>default <a href="../../util/optional">Optional</a>&lt;<a href="../../io/inputstream">InputStream</a>&gt;</code></td> <th scope="row"><code><a href="#open(java.lang.String)">open</a>​(<a href="../string">String</a> name)</code></th> <td> <p>Opens a resource, returning an input stream to read the resource in the module.</p> </td> </tr> <tr id="i4"> <td><code>default <a href="../../util/optional">Optional</a>&lt;<a href="../../nio/bytebuffer">ByteBuffer</a>&gt;</code></td> <th scope="row"><code><a href="#read(java.lang.String)">read</a>​(<a href="../string">String</a> name)</code></th> <td> <p>Reads a resource, returning a byte buffer with the contents of the resource.</p> </td> </tr> <tr id="i5"> <td><code>default void</code></td> <th scope="row"><code><a href="#release(java.nio.ByteBuffer)">release</a>​(<a href="../../nio/bytebuffer">ByteBuffer</a> bb)</code></th> <td> <p>Release a byte buffer.</p> </td> </tr> </table>  </section>   <div>   <section role="region">  <h2 id="method.detail">Methods</h2>   <h3 id="find(java.lang.String)">find</h3> <pre data-language="java">Optional&lt;URI&gt; find(String name)
            throws IOException</pre> <div>
<p>Finds a resource, returning a URI to the resource in the module. </p>
<p> If the module reader can determine that the name locates a directory then the resulting URI will end with a slash ('/'). </p>
</div> <dl> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to open for reading</dd> <dt>Returns:</dt> <dd>A URI to the resource; an empty <code>Optional</code> if the resource is not found or a URI cannot be constructed to locate the resource</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception">SecurityException</a></code> - If denied by the security manager</dd> <dt>See Also:</dt> <dd><a href="../classloader#getResource(java.lang.String)"><code>ClassLoader.getResource(String)</code></a></dd> </dl>    <h3 id="open(java.lang.String)">open</h3> <pre data-language="java">default Optional&lt;InputStream&gt; open(String name)
                            throws IOException</pre> <div>
<p>Opens a resource, returning an input stream to read the resource in the module. </p>
<p> The behavior of the input stream when used after the module reader is closed is implementation specific and therefore not specified. </p>
</div> <dl> <dt>Implementation Requirements:</dt> <dd>The default implementation invokes the <a href="#find(java.lang.String)"><code>find</code></a> method to get a URI to the resource. If found, then it attempts to construct a <a href="../../net/url"><code>URL</code></a> and open a connection to the resource.</dd> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to open for reading</dd> <dt>Returns:</dt> <dd>An input stream to read the resource or an empty <code>Optional</code> if not found</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception">SecurityException</a></code> - If denied by the security manager</dd> </dl>    <h3 id="read(java.lang.String)">read</h3> <pre data-language="java">default Optional&lt;ByteBuffer&gt; read(String name)
                           throws IOException</pre> <p>Reads a resource, returning a byte buffer with the contents of the resource. The element at the returned buffer's position is the first byte of the resource, the element at the buffer's limit is the last byte of the resource. Once consumed, the <a href="#release(java.nio.ByteBuffer)"><code>release</code></a> method must be invoked. Failure to invoke the <code>release</code> method may result in a resource leak.</p> <dl> <dt>API Note:</dt> <dd>This method is intended for high-performance class loading. It is not capable (or intended) to read arbitrary large resources that could potentially be 2GB or larger. The rationale for using this method in conjunction with the <code>release</code> method is to allow module reader implementations manage buffers in an efficient manner.</dd> <dt>Implementation Requirements:</dt> <dd>The default implementation invokes the <a href="#open(java.lang.String)"><code>open</code></a> method and reads all bytes from the input stream into a byte buffer.</dd> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to read</dd> <dt>Returns:</dt> <dd>A byte buffer containing the contents of the resource or an empty <code>Optional</code> if not found</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception">SecurityException</a></code> - If denied by the security manager</dd> <dd>
<code><a href="../outofmemoryerror">OutOfMemoryError</a></code> - If the resource is larger than <code>Integer.MAX_VALUE</code>, the maximum capacity of a byte buffer</dd> <dt>See Also:</dt> <dd><a href="../classloader#defineClass(java.lang.String,java.nio.ByteBuffer,java.security.ProtectionDomain)"><code>ClassLoader.defineClass(String, ByteBuffer, java.security.ProtectionDomain)</code></a></dd> </dl>    <h3 id="release(java.nio.ByteBuffer)">release</h3> <pre data-language="java">default void release(ByteBuffer bb)</pre> <p>Release a byte buffer. This method should be invoked after consuming the contents of the buffer returned by the <code>read</code> method. The behavior of this method when invoked to release a buffer that has already been released, or the behavior when invoked to release a buffer after a <code>ModuleReader</code> is closed is implementation specific and therefore not specified.</p> <dl> <dt>Implementation Requirements:</dt> <dd>The default implementation doesn't do anything except check if the byte buffer is null.</dd> <dt>Parameters:</dt> <dd>
<code>bb</code> - The byte buffer to release</dd> </dl>    <h3 id="list()">list</h3> <pre data-language="java">Stream&lt;String&gt; list()
             throws IOException</pre> <div>
<p>Lists the contents of the module, returning a stream of elements that are the names of all resources in the module. Whether the stream of elements includes names corresponding to directories in the module is module reader specific. </p>
<p> In lazy implementations then an <code>IOException</code> may be thrown when using the stream to list the module contents. If this occurs then the <code>IOException</code> will be wrapped in an <a href="../../io/uncheckedioexception"><code>UncheckedIOException</code></a> and thrown from the method that caused the access to be attempted. <code>SecurityException</code> may also be thrown when using the stream to list the module contents and access is denied by the security manager. </p> <p> The behavior of the stream when used after the module reader is closed is implementation specific and therefore not specified. </p>
</div> <dl> <dt>Returns:</dt> <dd>A stream of elements that are the names of all resources in the module</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception">SecurityException</a></code> - If denied by the security manager</dd> </dl>    <h3 id="close()">close</h3> <pre data-language="java">void close()
    throws IOException</pre> <div>
<p>Closes the module reader. Once closed then subsequent calls to locate or read a resource will fail by throwing <code>IOException</code>. </p>
<p> A module reader is not required to be asynchronously closeable. If a thread is reading a resource and another thread invokes the close method, then the second thread may block until the read operation is complete. </p>
</div> <dl> <dt>Specified by:</dt> <dd>
<code><a href="../autocloseable#close()">close</a></code> in interface <code><a href="../autocloseable">AutoCloseable</a></code>
</dd> <dt>Specified by:</dt> <dd>
<code><a href="../../io/closeable#close()">close</a></code> in interface <code><a href="../../io/closeable">Closeable</a></code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception">IOException</a></code> - if an I/O error occurs</dd> </dl>   </section>  </div>  </main>  <div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2020, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/module/ModuleReader.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/module/ModuleReader.html</a>
  </p>
</div>
